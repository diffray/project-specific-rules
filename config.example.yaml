# DiffRay Configuration Example
# Copy this file to .diffray/config.yaml in your project root

version: 1

# Global file filters
# These patterns are applied BEFORE rule matching
filters:
  # Use default exclusions (lock files, binaries, generated code, etc.)
  # Set to false to disable all default exclusions
  useDefaults: true

  # Additional patterns to exclude from review
  # Use glob patterns - these files will never be reviewed
  exclude:
    - '**/*.generated.ts'
    - '**/auto-generated/**'
    - '**/*.fixture.json'
    - 'legacy/**'
    - 'vendor/**'

  # Patterns to re-include (override default exclusions)
  # Use this to review files that would normally be excluded
  include:
    - 'package.json'
    - 'tsconfig.json'
    - '.eslintrc.json'

# Review settings
review:
  # Maximum files to review per PR (0 = no limit)
  maxFiles: 150

  # Language for review comments (overrides REVIEW_LANGUAGE env var)
  # Options: english, russian, portuguese, german, french, spanish
  language: german

  # AI model for reviews (overrides REVIEW_MODEL env var)
  # Options: opus (most capable), sonnet (balanced), haiku (fastest)
  model: opus

# Rules settings
rules:
  # Run ONLY these rules by ID (all others are ignored)
  # Useful for focused reviews on specific checks
  # only:
  #   - sec_sql_injection
  #   - sec_xss_dangerously_set_html

  # Exclude specific rules by ID
  exclude:
    - doc_missing_jsdoc
    - doc_readme_required

  # Tag-based filtering
  # Available tags: security, performance, bugs, error-handling, maintainability,
  # readability, style-conventions, type-safety, architecture, testing, documentation,
  # typescript, javascript, python, go, java, react, nextjs, vue, angular, docker, etc.
  tags:
    # Run ONLY rules with these tags (all others are ignored)
    # only:
    #   - security
    #   - performance

    # Exclude rules with these tags
    exclude:
      - documentation
      - style-conventions

  # Agent-based filtering
  # Available agents: security, performance, bugs, architecture, quality,
  # consistency, testing, documentation, general
  agents:
    # Run ONLY rules processed by these agents
    # only:
    #   - security
    #   - bugs

    # Exclude rules processed by these agents
    # exclude:
    #   - documentation
    #   - consistency

# ─────────────────────────────────────────────────────────────────────────────
# Example configurations for different use cases:
# ─────────────────────────────────────────────────────────────────────────────

# Security-only review (only security agent):
# rules:
#   agents:
#     only:
#       - security

# Quick review (exclude slow agents):
# review:
#   model: haiku
# rules:
#   agents:
#     exclude:
#       - documentation
#       - architecture

# Security + bugs only:
# rules:
#   agents:
#     only:
#       - security
#       - bugs

# TypeScript project (by tags):
# rules:
#   tags:
#     only:
#       - typescript
#       - security
#       - bugs

# React/Next.js project:
# rules:
#   tags:
#     only:
#       - react
#       - nextjs
#       - security
#       - performance

# Compliance review:
# rules:
#   tags:
#     only:
#       - compliance-gdpr
#       - compliance-soc2
#       - compliance-pci-dss
#       - security
#       - privacy
